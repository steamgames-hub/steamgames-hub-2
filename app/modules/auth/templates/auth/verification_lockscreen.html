{% extends "base_template.html" %}

{% block title %}Verify your account{% endblock %}

{% block content %}

<h1 class="h2 mb-3"><b>Verify your account</b></h1>

<div class="row">
    <div class="col-12">

        <p class="lead">Please, verify your account to continue.</p>
                <p>Have you not received a verification message? <a class="text-decoration-underline" href="{{ url_for('auth.send_verification_email') }}">Send a new email</a>.</p>

    </div>
</div>

<!-- message sent modal -->
<div class="modal fade" id="verificationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Message sent</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p id="verificationModalBody">A verification email has been sent. Please, check your inbox and spam folders.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
    <div id="verification_modal_data" style="display: none"
         data-show="{{ 'true' if show_modal else 'false' }}"
         data-message="{{ modal_message|e }}">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const dataEl = document.getElementById('verification_modal_data');
            if (dataEl && dataEl.dataset.show === 'true') {
                const bodyEl = document.getElementById('verificationModalBody');
                if (bodyEl && dataEl.dataset.message) {
                    bodyEl.textContent = dataEl.dataset.message;
                }
                const modalEl = document.getElementById('verificationModal');
                if (modalEl) {
                    const modal = new bootstrap.Modal(modalEl);
                    modal.show();
                }
            }
        });
    </script>
{% endblock %}